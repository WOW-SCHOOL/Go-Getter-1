<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WOW SCHOOL — Go Getter 1</title>

  <!-- ВАЖНО: оставляем актуальную версию стилей -->
  <link rel="stylesheet" href="style.css?v=4" />
</head>
<body>
  <header class="site-head">
    <div class="brand">WOW SCHOOL</div>
    <h1 class="page-title">Go Getter 1</h1>
  </header>

  <!-- Постер/обложка. Он закрывает экран до клика, поэтому ниже добавлен хук для Miro -->
  <div id="poster" class="poster">
    <img src="cover.jpg" alt="Go Getter 1 (cover)" />
    <button id="enter" class="enter">Открыть треки</button>
  </div>

  <main id="app" class="app" hidden>
    <!-- ваш плеер, список треков и т.п. (без изменений) -->
  </main>

  <!-- Ваш существующий скрипт, который по клику скрывает постер и показывает плеер -->
  <script>
    (function () {
      const poster = document.getElementById('poster');
      const app = document.getElementById('app');
      const enter = document.getElementById('enter');

      function showApp() {
        if (poster) poster.classList.add('hide');
        if (app) app.hidden = false;
      }

      if (enter) enter.addEventListener('click', showApp);
      // на всякий случай — клик по самому постеру
      if (poster) poster.addEventListener('click', function (e) {
        if (e.target === poster) showApp();
      });
    })();
  </script>

  <!-- НОВОЕ: мини-хук для Miro и масштабирования -->
  <script>
    (function () {
      const params = new URLSearchParams(location.search);

      // 1) Если это фрейм в Miro — сразу скрываем постер
      if (params.has('miro')) {
        const poster = document.getElementById('poster');
        const app = document.getElementById('app');
        if (poster) poster.classList.add('hide');
        if (app) app.hidden = false;
      }

      // 2) Опционально: общий масштаб интерфейса, например fs=1.10 (+10%)
      const fs = parseFloat(params.get('fs'));
      if (!Number.isNaN(fs) && fs > 0) {
        document.documentElement.style.fontSize = (16 * fs) + 'px';
      }
    })();
  </script>

  <!-- Остальной ваш код для загрузки плейлиста и инициализации плеера (как было) -->
  <script>
    (async function () {
      // пример — оставьте как у вас
      const res = await fetch('playlist.json?v=4');
      const playlist = await res.json();
      // initPlayer(playlist); // ваш существующий вызов
    })();
  </script>
</body>
</html>
